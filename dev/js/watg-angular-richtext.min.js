/*! watg-angular-richtext 2017-04-23 */
!function(){"use strict";angular.module("watgRichtextModule",["ngRoute","ngSanitize","watgRichtextModule.const"])}(),function(){"use strict";function appConfig($httpProvider,$routeProvider){$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"],$httpProvider.defaults.headers.get||($httpProvider.defaults.headers.get={}),$httpProvider.defaults.headers.common["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",$httpProvider.defaults.headers.common["Cache-Control"]="no-cache",$httpProvider.defaults.headers.common.Pragma="no-cache",$routeProvider.when("/test",{templateUrl:"src/app/tests/test.html",controller:"testController"}).otherwise({redirectTo:"/test"})}function appRun(){}var app=angular.module("watgRichtextModule");app.config(["$httpProvider","$routeProvider",appConfig]),app.run(appRun)}(),angular.module("watgRichtextModule.const",[]).constant("CONST_RICHTEXTEDITOR_TEMPLATE_URL","src/app/directives/templates/watgRichtextEditorTemplate.html"),function(){"use strict";function watgRichtext(CONST_RICHTEXTEDITOR_TEMPLATE_URL){return{restrict:"E",templateUrl:CONST_RICHTEXTEDITOR_TEMPLATE_URL,scope:{id:"=",input:"=",output:"=",config:"=",resetCount:"="},link:function(scope,element){console.log("Richtext Template URL %s",CONST_RICHTEXTEDITOR_TEMPLATE_URL);var editor,editorDoc,editorHead,editorBody;scope.hyperlinkModalId="hyperlinkeModal"+scope.id,scope.showSourceEditor=!1,scope.menuEnabled=!1,scope.richTextSource="",scope.output=scope.input,scope.$watch("output",function(){scope.output?scope.menuEnabled=!0:scope.menuEnabled=!1}),scope.update=function(){try{scope.output=editorDoc.body.innerHTML,scope.$apply()}catch(e){}},scope.applyRichText=function(action,details){try{"createLink"===action&&-1===details.indexOf("http://")&&-1===details.indexOf("https://")&&(details="http://"+details),editorDoc.execCommand(action,!1,details),scope.update()}catch(e){}},scope.$watch("config.variables",function(){}),scope.$watch("config.fontFamilies",function(){}),scope.$watch("config.fontSizes",function(){}),scope.$watch("config.colors",function(){}),scope.$watchCollection("resetCount",function(newValue,oldValue){void 0!==newValue&&newValue.length>0&&(scope.output="",editorDoc&&(editorDoc.body.innerHTML=scope.output))}),void 0===scope.config.fontFamilies&&(scope.config.fontFamilies=[{fontName:"Arial"},{fontName:"Calibri"},{fontName:"Time New Roman"},{fontName:"Palatino Linotype"}]),void 0===scope.config.fontSizes&&(scope.config.fontSizes=[{fontSizeName:"Huge",fontSize:7},{fontSizeName:"Big",fontSize:5},{fontSizeName:"Normal",fontSize:3},{fontSizeName:"Small",fontSize:1}]),void 0===scope.config.colors&&(scope.config.colors=[{colorName:"Black",colorValue:"000000"},{colorName:"Silver",colorValue:"C0C0C0"},{colorName:"Gray",colorValue:"808080"},{colorName:"White",colorValue:"FFFFFF"},{colorName:"Maroon",colorValue:"800000"},{colorName:"Red",colorValue:"FF0000"},{colorName:"Purple",colorValue:"800080"},{colorName:"Fuchsia",colorValue:"FF00FF"},{colorName:"Green",colorValue:"008000"},{colorName:"Lime",colorValue:"00ff00"},{colorName:"Olive",colorValue:"808000"},{colorName:"Yellow",colorValue:"ffff00"},{colorName:"Navy",colorValue:"000080"},{colorName:"Blue",colorValue:"0000FF"},{colorName:"Teal",colorValue:"008080"},{colorName:"Aqua",colorValue:"00ffff"}]),scope.initialize=function(){editor=element.find("iframe")[0],editor?(editorDoc=editor.contentDocument?editor.contentDocument:editor.contentWindow.document,editorHead=editorDoc.head,null!==editorHead&&(editorHead.innerHTML="<link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css' rel='stylesheet'/>"),editorBody=editorDoc.body,scope.config.height||(scope.config.height=300),$(editor).css("height",scope.config.height),$("#richTextSource").css("height",scope.config.height),!1===scope.config.multiLine&&($(editor).attr("maxLength","10"),$(editorBody).attr("maxLength","10")),"spellcheck"in editorBody&&(editorBody.spellcheck=!0),"contentEditable"in editorBody?editorBody.contentEditable=!0:"designMode"in editorDoc&&(editorDoc.designMode="on"),scope.input&&(editorDoc.body.innerHTML=scope.input),$(editor.contentWindow.document).keydown(function(e){!1===scope.config.multiLine&&(13===e.keyCode&&e.preventDefault(),scope.output.length>150&&8!==e.keyCode&&35!==e.keyCode&&36!==e.keyCode&&46!==e.keyCode&&e.preventDefault())}),$(editor.contentWindow.document).keyup(function(){scope.update()}),$(editor.contentWindow.document).blur(function(){scope.update()})):console.error("Rich-text editor not found")},scope.initialize()}}}angular.module("watgRichtextModule").directive("watgRichtextEditor",["CONST_RICHTEXTEDITOR_TEMPLATE_URL",watgRichtext])}(),function(){"use strict";function testController($scope){$scope.header="Richtext",$scope.item={Input:"<b>test</b>",Output:""},$scope.item2={Input:"",Output:""},$scope.resetCount=[],$scope.resetCount2=[],$scope.doSomething=function(){console.log("do something"),$scope.resetCount.push(parseInt($scope.resetCount.length+1))},$scope.watgRichTextConfig={height:200,multiLine:!0,fontSizes:[{fontSizeName:"Huge",fontSize:7},{fontSizeName:"Big",fontSize:5},{fontSizeName:"Normal",fontSize:3},{fontSizeName:"Small",fontSize:1}],fontFamilies:[{fontName:"Arial"},{fontName:"Calibri"},{fontName:"Time New Roman"},{fontName:"Palatino Linotype"}],colors:[{colorName:"Black",colorValue:"000000"},{colorName:"Silver",colorValue:"C0C0C0"},{colorName:"Gray",colorValue:"808080"},{colorName:"White",colorValue:"FFFFFF"},{colorName:"Maroon",colorValue:"800000"},{colorName:"Red",colorValue:"FF0000"},{colorName:"Purple",colorValue:"800080"},{colorName:"Fuchsia",colorValue:"FF00FF"},{colorName:"Green",colorValue:"008000"},{colorName:"Lime",colorValue:"00ff00"},{colorName:"Olive",colorValue:"808000"},{colorName:"Yellow",colorValue:"ffff00"},{colorName:"Navy",colorValue:"000080"},{colorName:"Blue",colorValue:"0000FF"},{colorName:"Teal",colorValue:"008080"},{colorName:"Aqua",colorValue:"00ffff"}],variables:[{Name:"One"},{Name:"Two"},{Name:"Three"}],showVariablesSelector:!0,showFontSelector:!0,showFontSizeSelector:!0,showColorSelector:!0,showBold:!0,showItalic:!0,showStrikeThrough:!0,showUnderline:!0,showUnorderedList:!0,showOrderedList:!0,showReduceIndent:!0,showIndent:!0,showLeftAlign:!0,showCenterAlign:!0,showRightAlign:!0,showJustify:!0,showUndo:!0,showRedo:!0,showInsertLink:!0,showRemoveLink:!0,showSourceCode:!0,Button:{Style:"btn-primary btn-sm"}}}angular.module("watgRichtextModule").controller("testController",["$scope",testController])}();